(window.webpackJsonp=window.webpackJsonp||[]).push([[348],{910:function(s,t,n){"use strict";n.r(t);var a=n(15),e=Object(a.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[s._v("特性：在 vue3 中，bind 名为 mounted 函数，updat 名为 updated 函数，用法和作用都是一样的\n\nbind(el, binding) 函数\n    作用：当被绑定的元素渲染到页面后 触发（第一次生效，后面不生效）\n    特性：\n        1、参数一，当前 指令所绑的 DOM元素\n        2、参数二，当前 自定义指令 对象\n\nupdat(el, binding) 函数\n    作用：数据变化时 触发（第一次不生效，后面生效）\n    特性：\n        1、参数一，当前 指令所绑的 DOM元素\n        2、参数二，当前 自定义指令 对象\n\n特性：当 bind 和 updat 的函数体完全相同时，可以简写为 函数格式\n")])])]),n("h2",{attrs:{id:"私有自定义指令-只能在定义的组件中使用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#私有自定义指令-只能在定义的组件中使用"}},[s._v("#")]),s._v(" 私有自定义指令：只能在定义的组件中使用")]),s._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[s._v('使用步骤：\n    （1）在 directives 节点中定义 私有自定义指令\n    （2）使用 自定义指令\n\n需求：点击按钮，让 h1 变为红色\n\n<template>\n    <div class="app-container">\n\n        // （2）使用 自定义指令\n        <h1 v-color="color">App 根组件</h1>\n\n    </div>\n</template>\n\nexport default {\n\n    // （1）在 directives 节点中定义 私有自定义指令\n    // directives：定义 私有自定义指令\n    data() {\n        return {\n            color: \'blue\'\n        }\n    },\n    directives: {\n        /*  \n            color: {\n                bind(el, binding) {\n\n                    // binding.value：获取 自定义指令的值\n                    el.style.color = binding.value\n\n                }，\n                update(el, binding) {\n                    el.style.color = binding.value\n                }\n            } \n        */\n        // 简写：\n            color(el, binding) {\n                el.style.color = binding.value\n            }\n    }\n\n}\n')])])]),n("h2",{attrs:{id:"全局自定义指令-可以在所有组件中使用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#全局自定义指令-可以在所有组件中使用"}},[s._v("#")]),s._v(" 全局自定义指令：可以在所有组件中使用")]),s._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[s._v("语法：Vue.directive('指令名', function(el, binding) {函数体})\n使用步骤：在 main.js 的 Vue.directive方法 中定义\n特性：和 私有自定义指令相同\n\n-- main.js\n/*\n    Vue.directive('color', {\n        bind(el, binding) {\n            el.style.color = binding.value\n        }，\n        update(el, binding) {\n            el.style.color = binding.value\n        }\n    })\n*/\n\n// 简写：\n    Vue.directive('color', (el, binding) => {\n        el.style.color = binding.value\n    })\n")])])]),n("h2",{attrs:{id:"应用场景"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#应用场景"}},[s._v("#")]),s._v(" 应用场景")]),s._v(" "),n("h3",{attrs:{id:"一-解决图片有地址-但是没有加载成功的问题"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#一-解决图片有地址-但是没有加载成功的问题"}},[s._v("#")]),s._v(" （一）解决图片有地址，但是没有加载成功的问题")]),s._v(" "),n("p",[n("strong",[s._v("解决方法：")]),s._v(" 设置图片异常的默认图片")]),s._v(" "),n("p",[n("strong",[s._v("原理：")]),s._v("\n1、自定义指令\n2、\bonerror 事件")]),s._v(" "),n("h4",{attrs:{id:"使用步骤"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#使用步骤"}},[s._v("#")]),s._v(" 使用步骤")]),s._v(" "),n("h5",{attrs:{id:"_1-定义自定义指令-src-新建-directives-index-js"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-定义自定义指令-src-新建-directives-index-js"}},[s._v("#")]),s._v(" （1）定义自定义指令（-- @/src/新建 directives/index.js）")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" imageError "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("inserted")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("dom"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" options")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// inserted 钩子函数：当前 dom 元素插入到节点之后执行")]),s._v("\n    dom"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("src "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" dom"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("src "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" options"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("value\n    dom"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("onerror")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// onerror 事件：图片有地址，但是没有加载成功触发")]),s._v("\n    dom"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("src "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" options"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("value\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("componentUpdated")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("dom"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" options")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// componentUpdated 钩子函数：当前 dom 元素更新数据后执行")]),s._v("\n    dom"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("src "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" dom"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("src "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" options"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("value\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("h5",{attrs:{id:"_2-全局引入自定义指令-main-js"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-全局引入自定义指令-main-js"}},[s._v("#")]),s._v(" （2）全局引入自定义指令（-- @/main.js）")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" directives "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'@/directives'")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h5",{attrs:{id:"_3-注册自定义组件-同上"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-注册自定义组件-同上"}},[s._v("#")]),s._v(" （3）注册自定义组件（-- 同上）")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[s._v("Object"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("keys")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("directives"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("forEach")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("key")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  Vue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("directive")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" directives"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h5",{attrs:{id:"_4-定义默认图片-组件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-定义默认图片-组件"}},[s._v("#")]),s._v(" （4）定义默认图片（-- 组件）")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("data")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("defaultImg")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'@/assets/common/head.jpg'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 考虑到打包时，路径会发送变化，导致图片加载失败。所以这里使用 require 包裹起来")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("h5",{attrs:{id:"_5-绑定自定义指令-同上"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-绑定自定义指令-同上"}},[s._v("#")]),s._v(" （5）绑定自定义指令（-- 同上）")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("img v"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("imageError"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"defaultImg"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])])])}),[],!1,null,null,null);t.default=e.exports}}]);