---
title: 内置组件
date: 2022-06-27 14:06:16
permalink: /pages/eaa6ce/
categories:
  - 《前端》笔记《基础知识》
  - 原生微信小程序
tags:
  - 
---
```
文档：https://developers.weixin.qq.com/miniprogram/dev/component/

标签取代：

  （1）view 取代 div

  （2）text 取代 span

  （3）image 取代 img

  （4）navigator 取代 a

view
  作用：相当于 <div> 标签
  属性：
    hover-class  // 按下去的样式类
    hover-stop-propagation  // 是否阻止事件冒泡

  <view>我是块级元素</view>
  <view>我是块级元素</view>

text 
  作用：文本组件。相当于 <span> 标签
  特性：
    1、可以对 空格 回车 进行编码
  属性：
    selectable：允许长按文字复制（只有该标签拥有这个功能）
    decode：是否解码 

  <text selectable>我是行内元素</text>
  <text decode>&nbsp</text>

rich-text
  作用：富文本组件。相当于 <span> 标签

  特性：
    1、支持把 HTML 字符串渲染为 WXML 结构

  属性：
    nodes：指定 HTML 字符串
  
  例：
    <rich-text nodes="<h1 style='color:red;'>标题</h1>"></rich-text>

image
  作用：图片容器
  特性：
    1、图片大小不能超过 2M
    2、小程序中的图片统一上传到图床中使用  推荐图床：https://imgtu.com/
    3、image 组件的默认 宽度：320px 高度：240px，在 image 中设置的宽高不是图片的宽高，而是 image 组件的宽高，图片的宽高只能使用 mode 控制
  属性：
    mode：缩放/裁剪 模式
      缩放：
        - scaleToFill（默认）：不保持纵横比，宽高 拉伸至填满容器的 宽高
        - aspectFit：保持纵横比，拉伸至填满容器的 宽 或 高
        - aspectFill：保持纵横比，拉伸至填满容器的 宽 或 高，并居中
        - widthFix：高 根据 宽 等比例缩放，相对于只设置了宽，高等比例缩放
        - heightFix：宽 根据 高 等比例缩放，相对于只设置了高，宽等比例缩放
      裁剪：
        - top：居中顶部对齐
        - button：居中底部对齐
        - left：居中左对齐
        - right：居中右对齐
        - center：居中对齐
        - top left：左上
        - top right：右上
        - bottom left：左下
        - bottom right：右下

    lazy-load：开启懒加载（小程序中自带懒加载，只需开启即可）

  // 语法：<image src="图床中的图片地址" />
  <image mode="aspectFit" lazy-load src="https://tva2.sinaimg.cn/large/007DFXDhgy1g51jlzfb4lj305k02s0sp.jpg" />

swiper
  作用：轮播图
  特性：
    1、高度无法由内容撑开，所以要设置高度  高度 = 宽度 * 图片高度 / 图片宽度
  属性：
    1、autoplay：自动轮播
    2、interval：自动轮播间隔时间（默认 5s 轮播一次）
    3、circular：衔接轮播
    4、indicator-dots：指示器
    5、indicator-color：指示器 未选中 状态颜色
    6、indicator-active-color：指示器 已选中 状态颜色

  使用步骤：
    （1）导入结构
      <swiper autoplay interval="3000" circular indicator-dots>
        <swiper-item wx:for="{{swiperList}}" wx:key="id">
          <image mode="widthFix" src="{{item.picUrl}}" />
        </swiper-item>
      </swiper>

    （2）定义样式
      swiper {
        // swiper 高度 = swiper 宽度 * 原图高度 / 原图宽度
        height: calc(750rpx * 352 / 1125);
        image {
          width: 100%;
          height: 100%;
        }
      }

navigator
  作用：类似 a 标签
  特性：
    1、块级元素
    2、取代 a 标签
  属性：
    target：
      self：跳转到自己小程序（默认）
      miniProgram：跳转到其他小程序

    url：跳转的页面路径

    open-type：跳转方式
      navigate（默认）：跳转到应用内的某个页面，但是不能跳转到 tabbar 配置项中的页面，保留当前页面（跳转后 显示 后退箭头）
      redirect：       跳转到应用内的某个页面，但是不能跳转到 tabbar 配置项中的页面，不保留当前页面（跳转后 不显示 后退箭头）
      switchTab：跳转到 tabBar 页面，并关闭其他所有非 tabBar 页面
      reLaunch：关闭所有页面，打开应用内的某个页面
      navigateBack：关闭当前页面，返回上一页面或多级页面
      exit：退出其他小程序 结合 target="minProgram" 使用

  作用：
      <navigator url="/pages/index.index">跳转到首页</navigator>  // 无法跳转到 tabbar 页面，即使点击了也不会生效
      <navigator open-type="redirect" url="/pages/demo10.demo10">跳转到其他页面</navigator>
      <navigator open-type="switchTab" url="/pages/index.index">跳转到首页</navigator>
      <navigator open-type="reLaunch" url="/pages/index.index">随便跳</navigator>

rich-text
  作用：解析 HTML 标签，类似 v-html

  数据格式：
    （1）字符串（推荐）
      html: '<div width="200px" height="100px" backgroundColor="pink"></div>

    （2）对象数组
      html: [
        {
          name: "div",  // 指定标签
          attrs: {      // 标签上的属性
            width: "200px",
            height: "100px",
            backgroundColor: "pink"
          },
          children: [  // 子节点
            {
              name: "p"
              attrs: {},
              children: [
                {
                  type: "text",  // 文本
                  text: "hello"  // 内容
                }
              ]
            }
          ]
        }
      ]
  
  例：
    <rich-text nodes="{{html}}"></rich-text>

button
  作用：按钮
  属性：
    提示：以下样式只是小程序提供的，更推荐自己定义样式

    size：按钮大小
      - default：默认大小
      - mini：小尺寸
    type：按钮颜色
      - primary：绿色
      - warn：红色
    plain：按钮是否镂空，背景色透明
    
    loading：名称前是否带 loading 图标
    open-type：打开类型（请在真机中调试。微信开发者工具 → 预览 → 微信扫码）
      - contact：客服对话
        使用步骤：
          1、将小程序 AppID 由测试号改为自己的 AppID（在小程序开发工具中的 详情栏中修改）
          2、在微信小程序官网添加客服微信账号（功能 → 客服 → 添加）
      - share：转发小程序到微信朋友中，不能分享到朋友圈里
      - getPhoneNumber：获取当前用户的手机号码（特性：不是企业微信小程序，则没有获取权限）
        使用步骤：
          1、绑定 bindgetphonenumber="getPhoneNumber" 属性
          2、配置 getPhoneNumber 方法
          3、获取手机号码（这手机号码是加密的，需要用户自己搭建小程序的后台服务器，在后台服务器中进行解析手机号码，返回到小程序中，就可以看到手机号码了）
      - getUserInfo：获取当前用户的个人信息
        使用步骤：
          1、绑定 bindgetphonenumber="getUserInfo" 属性
          2、配置 getUserInfo 方法
          3、获取个人信息（个人信息存储在 detail → userInfo 对象中）
      - launchApp：在小程序中直接打开 APP。如在 京东小程序中 打开 京东APP
        使用步骤：
          1、需要在 app 中通过 app 的某个链接打开小程序
          2、在小程序中再通过这个功能重新打开 app
      - openSetting：小程序内置授权页面（该页面只会显示用户授权过的信息）
      - feedback：小程序内置意见反馈页面

      Page({
        getPhoneNumber(e) {
          console.log(e)
        }
        getUserInfo(e) {
          e.detail.userInfo             // 用户信息对象
          e.detail.userInfo.avatarUrl   // 用户头像
          e.detail.userInfo.city        // 所在城市
          e.detail.userInfo.country     // 所在国家
          e.detail.userInfo.gender      // 性别（1：男）
          e.detail.userInfo.language    // 语言
          e.detail.userInfo.nickName    // 昵称
          e.detail.userInfo.province    // 省份
        }
      })

      <button open-type="contact">contact</button>
      <button open-type="share">share</button>
      <button open-type="getPhoneNumber" bindgetphonenumber="getPhoneNumber">getPhoneNumber</button>
      <button open-type="getUserInfo" bindgetuserinfo="getUserInfo">getUserInfo</button>
      <button open-type="launchApp">launchApp</button>
      <button open-type="openSetting">openSetting</button>
      <button open-type="feedback">feedback</button>

icon
  作用：字体图标

  属性：
    type：状态（文档：https://developers.weixin.qq.com/miniprogram/dev/component/icon.html）
    size：大小（默认 23px）
    color：颜色

  例：
    <icon type="success" size="23" color=""></icon>

radio
  作用：单选框

  特性：必须放在 radio-group 里面

  属性：
    color：颜色

  语法：
    （1）e.detail.value：获取单选框中的值
    （2）bindchange 事件：单选框选中时触发
  
  使用步骤：
    （1）导入结构
      <radio-group bindchange="handleChange">
        <radio value="male">男</radio>
        <radio value="female">女</radio>
      </radio-group>

    （2）定义 数据、方法
      Page({
        data: {
          gender: ""
        },
        handleChange(e) {
          let gender = e.detail.value;
          this.setData({
            gender
          })
        }
      })

checkbox
  作用：复选框

  特性：必须放在 checkbox-group 里面

  语法：
    （1）e.detail.value：获取单选框中的值

  使用步骤：
    功能：将勾选的表单显示在盒子中

    （1）导入结构
      <view>
        <checkbox-group bindchange="handleItemChange"> 
          <checkbox value="{{item.value}}" wx:for="{{list}}" wx:key="id">
            {{item.name}}
          </checkbox>
        </checkbox-group>
        <view>
          选中的水果：{{checkedList}}
        </view>
      </view>

    （2）定义 数据、方法
      Page({
        data: {
          list: [
            {
              id: 0,
              name: "苹果",
              value: "apple"
            },
            {
              id: 1,
              name: "葡萄",
              value: "grape"
            },
            {
              id: 2,
              name: "香蕉",
              value: "bananer"
            }
          ]
        },
        handleItemChange(e) {
          const checkedList = e.detail.value;
          this.setData({
            checkedList
          })
        }
      })

scroll-view
  作用：滑动视图容器

  属性：
    scroll-y：允许纵向滚动（特性：1、scroll-view 必须要有高度才能生效 2、内容要超过 scroll-view 的高度）
    scroll-x：允许横向滚动（特性：1、scroll-view 必须要有宽度才能生效 2、内容要超过 scroll-view 的宽度）

  说明：
    常配合 uni.getSystemInfoSync() 接口使用

  特性：
    （1）flex 布局无效
      解决方法：在 scroll-view 子级创建一个 view，将内容写在里面

  使用步骤：
    （1）导入骨架
      <scroll-view scroll-y="true" :style="{height: wh + 'px'}"></scroll-view>

    （2）获取屏幕设备可用高度
      // 当前设备可用高度
      wh: 0

      onLoad() {
        const sysInfo = uni.getSystemInfoSync()
        this.wh = sysInfo.windowHeight
      }
```