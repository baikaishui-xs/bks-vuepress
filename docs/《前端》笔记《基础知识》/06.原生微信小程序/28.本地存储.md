---
title: 本地存储
date: 2022-06-27 14:06:16
permalink: /pages/f4a219/
categories:
  - 《前端》笔记《基础知识》
  - 原生微信小程序
tags:
  - 
---
**文档：** https://developers.weixin.qq.com/miniprogram/dev/api/storage/wx.setStorageSync.html

**查看缓存数据：** 终端 → Storage

**作用：**
  1、提高页面加载速度
  2、减轻服务器请求压力。文件缓存后不需要再次请求，只需要请求需要更新的文件

**执行机制：**
  **无缓存：** 浏览器请求 → 无缓存 → 向服务器发送请求 → 请求响应缓存协商 → 呈现
  **有缓存：** 浏览器请求 → 有缓存 → 查看缓存是否过期 → 没有过期则从缓存中读取 → 呈现

**应用场景：**
  1、频繁访问和修改的数据
  2、存储 Token
  3、存储用户信息
  4、高并发、高性能

**特性：** 
  1、只能存字符串。如果存储的是 json 对象，需要转换成字符串，使用时在转换成 json 对象
  ```
  wx.setStorageSync('userInfo', JSON.stringify(userInfo)) // 将 json 对象转换为字符串
  JSON.parse(wx.getStorageSync('userInfo') || '{}') // 将字符串转换为 json 对象
  ```
  2、默认都为异步，在后面加上 Sync 则为同步
  ```
  wx.setStorageSync()
  ```

## 一、wx.setStorageSync()
  **作用：** 存储

  **特性：**
  1、除非用户主动删除或因存储空间原因被系统清理，否则数据都一直可用
  2、单个 key 允许存储的最大数据长度为 1MB，所有数据存储上限为 10MB

  **例：**
  ```js
  wx.setStorageSync('token', token)
  ```

## 二、wx.getStorageSync()
  **作用：** 获取

  **例：**
  ```js
  wx.getStorageSync('token')
  ```

## 三、wx.removeStorageSync() 
  **作用：** 删除

  **例：**
  ```js
  wx.removeStorageSync('token') 
  ```

## 四、wx.clearStorageSync()
  **作用：** 清除所有缓存

  **例：**
  ```js
  wx.clearStorage()
  ```