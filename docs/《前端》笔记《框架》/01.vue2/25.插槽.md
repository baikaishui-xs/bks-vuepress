---
title: 插槽
date: 2022-06-27 11:01:39
permalink: /pages/effd84/
categories:
  - 《前端》笔记《框架》
  - 1.vue2
tags:
  - 
---
作用：在封装组件时，将不确定的地方，交由用户自定义

使用步骤：
    （1）定义 插槽（-- 子组件）
        <slot name="neirong">我是默认内容</slot>

    （2）在组件中 填充内容（-- 父组件）
        方法一（推荐）：
            <Left>
                <template #neirong>
                    <p>这是在 Left 组件的内容区域，定义的 p 标签</p>
                </template>
            </Left>

        方法二：
            <Left>
                <template v-slot:neirong>
                    <p>这是在 Left 组件的内容区域，定义的 p 标签</p>
                </template>
            </Left>

        方法三：
            <Left>
                <p slot="neirong">这是在 Left 组件的内容区域，定义的 p 标签</p>
            </Left>


特性：
    1、Vue 官方规定每个插槽都要有一个自己的名称，如果省略，默认名称为 default
    2、v-slot 只能放在 <template> 标签 中，并且 <template>标签 不会被渲染到页面中，它只是起到一个包含的作用
    3、v-slot: 可以简写为 #
    4、写在插槽里的内容为默认内容，当用户不指定内容时，采用默认内容。官方把这个方法叫做 后备内容

具名插槽（推荐）：带有名字的插槽

例一：用户自定义内容    
    -- App 组件
        <template>
            <div class="app-container">

                // （2）在组件中 填充内容
                <Left>
                    <template #neirong>
                        <p>这是在 Left 组件的内容区域，定义的 p 标签</p>
                    </template>
                </Left>

            </div>
        </template>

    -- Left 组件
        <template>
            <div class="left-container">
                
                // （1）定义 插槽
                <slot name="neirong">我是默认内容</slot>
                
            </div>
        </template>

例二：让用户自定义 文章标题、文章内容、文章作者

    -- App 组件
        <template>
            <div class="app-container">

                <Article>

                    <template #title>
                        <h3>一首诗</h3>
                    </template>

                    <template #content>
                        <div>
                            <p>啊，大海，全是水</p>
                            <p>啊，蜈蚣，全是腿</p>
                            <p>啊，辣椒，净辣嘴</p>
                        </div>
                    </template>

                    <template #author>
                        <div>作者：彬果锅</div>
                    </template>

                </Article>
                
            </div>
        </template>

    -- Article 组件
        <template>
            <div class="article-container">

                // 文章标题
                <div class="header-box">
                    <slot name="title"></slot>
                </div>

                // 文章内容
                <div class="content-box">
                    <slot name="content"></slot>
                </div>

                // 文章作者
                <div class="author-box">
                    <slot name="author"></slot>
                </div>
            </div>
        </template>

作用域插槽
    概念：带自定义属性的插槽，称为 作用域插槽
    作用：为用户提供数据
    使用步骤：
        （1）在插槽中定义 自定义属性
        （2）获取插槽中的 自定义属性
    特性：获取插槽中的自定义，是一个对象

-- App 组件
    <template>
        <div class="app-container">

            <Article>

                // （2）获取插槽中的 自定义属性

                // <template #author="scope">
                // <div>{{ scope }}</div>  // { "msg": "hello vue", "user": { "name": "zs", "age": 20 } }

                // 解构插槽
                <template #author="{ msg, user }">
                    <div>{{ msg }}</div>  // "hello vue"
                    <div>{{ user.name }} </div>  // "zs"
                </template>

            </Article>
            
        </div>
    </template>

-- Article 组件
    <template>
        <div class="article-container">
            <div class="author-box">

                // （1）在插槽中定义 自定义属性
                <slot name="author" msg="userinfo" :user="userinfo"></slot>

            </div>
        </div>
    </template>

    data() {
        return {
            userinfo: {
                name: 'zs',
            }
        }
    }

    例子：将渲染的结构，交由用户自定义
        -- App.vue
        
            <div>
                <my-test>
                    <template #default="{ msg, info }">
                        <p>{{ msg }}</p>
                        <p>{{ info.address }}</p>
                    </template>
                </my-test>

                <my-table>
                    <template #default="{user}">
                        <td>{{ user.id }}</td>
                        <td>{{ user.name }}</td>
                        <td>
                            <input type="checkbox" :checked="user.state" />
                        </td>
                    </template>
                </my-table>
            </div>

            import MyTest from './MyTest.vue'
            import MyTable from './MyTable.vue'

            name: 'MyApp',
            components: {
                MyTest
            }

        -- MyTable.vue

            <table>
                <tbody>
                    <tr v-for="item in list" :key="item.id">

                        // <td>{{ item.id }}</td>
                        // <td>{{ item.name }}</td>
                        // <td>{{ item.state }}</td>

                        <slot :user="item"></slot>

                    </tr>
                </tbody>
            </table>

            name: 'MyTable',
            data() {
                return {
                    list: [
                        { id: 1, name: '张三', state: true },
                        { id: 2, name: '李四', state: false },
                        { id: 3, name: '赵六', state: false },
                    ]
                }
            }