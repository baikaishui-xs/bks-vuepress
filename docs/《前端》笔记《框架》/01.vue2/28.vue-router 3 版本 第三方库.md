---
title: vue.router 3.x版本 第三方库
date: 2022-06-27 11:01:39
permalink: /pages/871156/
categories:
  - 《前端》笔记《框架》
  - 1.vue2
tags:
  - 
---
作用：操作路由
下载：npm i vue-router@3.5.2 -S
特性：3.x版本只能在 vue2 中使用

路由高亮：
  作用：当前路由链接的对应组件高亮
  特性：如果开发者没有自定义路由高亮的 class 类，则默认使用 router-link-active 类

  方法一：使用默认的高亮 class 类
    特性：被激活的路由链接，默认会添加一个叫做 router-link-active 的类名。开发者可以使用此类名选择器，为激活的路由链接设置高亮的样式
      -- index.css（全局样式表）
        .router-link-active {
          background-color: red;
          color: white;
          font-weight: bold;
        }

  方法二：自定义路由高亮的 class 类
    特性：在创建路由的实例对象时，开发者可以基于 linkActiveClass 属性，自定义路由链接被激活时所应用的类名
    语法：linkActiveClass: '自定义类名'
      -- router.js
        const router = createRouter({
          linkActiveClass: 'active-router',
        )}

      -- index.css（全局样式表）
      .active-router {
          background-color: blue;
          color: white;
          font-weight: bold;
      }
  

提示：当勾选 vue-cli 的路由功能时，会自动配置以下功能，无需手动配置
配置：
  1、在 src 目录下新建 router 目录，并新建 index.js 路由模块

  2、配置 index.js

    // （1）导入 Vue 和 VueRouter 包
    import Vue from 'vue'
    import VueRouter from 'vue-router'

    // （2）调用 Vue.use() 函数，把 VueRouter 安装为 Vue 的插件
    // Vue.use() 作用：为 Vue 安装插件
    Vue.use(VueRouter)

    // （3）创建路由的实例对象
    const router = new VueRouter()

    // （4）向外共享路由的实例对象
    export default router

  3、配置 main.js

    // （1）导入路由模块，拿到路由实例对象
    // 简写：如果只导入一个目录，默认会去这个目录下导入 index.js
    // import router from '@/router/index.js'
    import router from '@/router'

    // （2）将路由模块挂载到 new Vue 中的 router 属性
    new Vue({
      render: h => h(App),

      // 属性名 和 属性值 一样可以简写
      // router: router
      router
    }).$mount('#app')

需求：点击 路由链接，显示对应的组件
  -- App 组件
    <template>
      <div class="app-container">

        // （1）为点击的路由链接，设置 Hash 值

        // <a href="#/home">首页</a>
        // <a href="#/movie">电影</a>
        // <a href="#/about">关于</a>

        // 优化：使用 router-link 来替代 a 标签
        // router-link 标签：定义路由链接
        <router-link to="/home>首页</router-link>
        <router-link to="/movie>电影</router-link>
        <router-link to="/about>关于</router-link>

        <hr />

        // （2）定义 组件占位符
        // router-view
          // 作用：占位符，给组件占位置的
          // 特性：是由 vue-router 提供的
        <router-view></router-view>

      </div>
    </template>

  -- index.js（路由模块）

    // （3）导入组件
    import Home from '@/components/Home.vue'
    import Movie from '@/components/Movie.vue'
    import About from '@/components/About.vue'

    // （4）创建路由实例对象，并定义路由规则
    const router = new VueRouter({
      // routes 作用：定义 hash地址 与 组件 之间的对应关系
      routes: [
        // routes 里面的每一项被称为 路由规则。路由规则匹配成功，则展示对应的组件
        { path: '/home', component: Home },
        { path: '/movie', component: Movie },
        { path: '/about', component: About },
      ]
    })

路由重定向
  路由重定向：用户在访问 地址A 的时候，强制用户跳转到 地址C ，从而展示特定的组件页面
  解决：页面加载完毕后，默认访问的是 #/ 的 Hash地址 的问题
  解决方法：为 / 地址添加一个路由规则，使用 redirect 跳转到指定路由地址中
  // redirect：跳转到指定路由地址（路由重定向）
  { path: '/', redirect: '/home' },

嵌套路由
  嵌套路由：通过路由实现组件的嵌套展示
  可以理解为：router-view 里嵌套 router-link 和 router-view 就是嵌套路由

  -- App 组件
    <template>
      <div class="app-container">
        <router-link to="/home>首页</router-link>
        <router-link to="/movie>电影</router-link>
        <router-link to="/about>关于</router-link>
        <hr />
        <router-view></router-view>
      </div>
    </template>

  -- About 组件
    <template>
      <div class="about-container">

        // （1）为点击的路由链接，设置 Hash 值
        <router-link to="/about/tab1">tab1</router-link>
        <router-link to="/about/tab2">tab2</router-link>
        <hr />

        // （2）定义 组件占位符
        <router-view></router-view>

      </div>
    </template>

  -- index.js（路由模块）

    // （3）导入组件
    import Tab1 from '@/components/Tab1.vue'
    import Tab2 from '@/components/Tab2.vue'

    // （4）在父级路由规则中的 children 节点中定义子路由规则
    const router = new VueRouter({
      routes: [
        { 
          path: '/about',
          component: About,

          // （5）路由重定向
          redirect: '/about/tab1',

          children: [

            // （5）默认子路由
            // 默认子路由：children 数组中，某个路由规则的 path 为空字符串，则这条规则为 默认子路由。目的和 路由重定向一样，都是在访问 / 路由地址时，跳转到指定路由地址中
            // { path: 'tab1', component: Tab1 },
            { path: '', component: Tab1 },
            { path: 'tab2', component: Tab2 }
          ]
        }
      ]
    })

动态路由匹配
  作用：提高路由规则的复用性
  使用方法：把 Hash地址 中可变的部分定义为参数项
  语法：:占位符
  获取 参数项（路径参数）

    方法一：$route.params 对象
      $route.params.参数项

    方法二（推荐）：props
      // （1）定义 props
      props: ['mid']      
      // （2）开启 props
      { path: '/movie/:mid', component: Movie, props: true }

  查询参数：在 Hash地址 中 ? 后面的参数
  获取 查询参数：$route.query    // { name: "zs, age: "20" }

  获取 完整地址：$route.fullPath    // /movie/2?name=zs&age=20

  获取 路径：$route.path    // /movie/2

  需求：点击 路由链接，获取对应电影的详情

    <router-link to="/movie/1">电影1</router-link>
    <router-link to="/movie/2?name=zs age=20">雷神</router-link>
    <router-link to="/movie/3">电影3</router-link>

    -- App 组件

      传统方法：
        缺点：如果有一万个路由链接，就要设置一万个路由规则，导致路由规则的复用性差

        { path: '/movie/1', component: Movie }
        { path: '/movie/2', component: Movie }
        { path: '/movie/3', component: Movie }

      动态路由匹配方法：
        { path: '/movie/:id', component: Movie }

    -- index.js
      routes: [
        { path: '/movie/:mid', component: Movie, props: true }
      ]

    -- Movie 组件
      <template>
        <div class="movie-container">
          // <h3>Movie 组件 --- {{ $route.params.mid }}</h3>
        </div>
      </template>

      <script>
        props: ['mid']
      </script>

    