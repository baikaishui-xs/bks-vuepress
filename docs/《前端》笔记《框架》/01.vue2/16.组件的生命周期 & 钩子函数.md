---
title: 组件的生命周期 & 钩子函数
date: 2022-06-27 11:01:39
permalink: /pages/a01ff5/
categories:
  - 《前端》笔记《框架》
  - 1.vue2
tags:
  - 
---
```
文档：https://cn.vuejs.org/v2/api/#选项-生命周期钩子

组件的生命周期：组件从 创建 -> 运行 -> 销毁 的整个阶段

生命周期函数：vue 提供的内置函数，在某个特定的时间点 触发

可以将一个组件理解为一个构造函数，当使用 标签组件时，就相当于 new 了这个组件的实例

组件的生命周期：

    （1）创建 阶段

        1、beforeCreate：初始化事件 和 生命周期函数 后触发
            特性：props/data/methods 尚未被创建，都处于不可用状态

        2、created（常用）：初始化 props、data、methods 后触发 时触发
            特性：模板结构尚未生成，无法操作 DOM
            应用场景：发起 Ajax 请求，获取数据，并渲染到页面中
                使用步骤：
                    （1）定义 Ajax 请求方法
                    （2）将 Ajax 获取回来的数据 存储到 data 中
                    （3）将数据 渲染 到页面中

                <template>
                    <div class="test-container">

                        // （3）将数据 渲染 到页面中
                        <h3>{{ books.length }} 本图书</h3>

                    </div>
                </template>

                export default {
                    data() {
                        return {
                            books: []
                        }
                    }

                    // （1）定义 Ajax 请求方法
                    methods: {
                        initBookList() {
                            const xhr = new XMLHttpRequest()
                            xhr.addEventListener('load', function() {
                                const result = JSON.parse(xhr.responseText)
                                console.log(result)

                                // （2）将 Ajax 获取回来的数据 存储到 data 中
                                this.books = result.data
                            })
                            xhr.open('GET', 'http://www.liulongbin.top:3006/api/getbooks')
                            xhr.send()
                        }
                    }

                    created() {
                        this.initBookList()
                    }
                }

        在内存中编译生成 HTML 结构 阶段：
            会判断是否有 el 选项，有就会走 YES 流程，没有则走 NO 流程，NO 流程就是当 $monunt 这个方法被调用后，走向 template 阶段，而 YES 流程会直接走向 template 阶段，template 阶段会判断是否拥有 template 选项，如果有则只有 YSE 流程，没有则走 NO 流程，YES 流程会将 template 选项中的模板进行编译，NO 流程会将 el 提供的模板进行编译

        3、beforeMount：HTML结构 渲染前 触发

        4、mounted（常用）：HTML结构 渲染后 触发
            应用场景：操作 DOM 元素

    （2）运行 阶段：data、props 中的数据变化后 触发

        1、beforeUpdate：页面重新渲染 前
            特性：在 created 中渲染了数据，所以会自动触发一次

        2、updated（常用）：页面重新渲染 后

    （3）销毁 阶段
        销毁方法：v-if="flag"
        1、beforeDestroy：组件 销毁前 触发
        2、destroyed：组件 销毁后 触发
```