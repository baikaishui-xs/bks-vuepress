---
title: 计算属性
date: 2022-06-27 11:01:39
permalink: /pages/4e87f6/
categories:
  - 《前端》笔记《框架》
  - 1.vue2
tags:
  - 
---
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <script src="sucai/vue-2.6.12.js"></script>
  <style>
    .box {
      width: 200px;
      height: 200px;
      border: 1px solid #ccc;
    }
  </style>
</head>

<body>
    <!-- 知识点：计算属性
        概念：通过一系列运算后得到的属性值
        作用：复用性高
        特性：
          1、计算属性中的值，依赖 data 中的数据 
          2、当依赖的数据发生变化时，计算属性也会跟着变化
          3、需要使用 return 返回结果
        应用场景：插值表达式、methods、v-bind、购物车页面
        使用步骤：
          （1）在 computed 中定义方法
            computed: {
              rgb() {
                return `rgb(${this.r}, ${this.g}, $(this.b}`
              }
            }

          （2）和 data 数据的使用方式一样
            <div>{{ rgb }}</div>
    -->

    <div id="app">
        <div>
          <span>R：</span>
          <input type="text" v-model.number="r">
        </div>
        <div>
          <span>G：</span>
          <input type="text" v-model.number="g">
        </div>
        <div>
          <span>B：</span>
          <input type="text" v-model.number="b">
        </div>
        <hr>

    <!-- 传统方法：如果要改成 rgba 就要改三个地方，复用性很低-->
    <!-- 计算属性：只需要改 compited 里定义的计算属性即可 -->

    <!-- 传统方法：<div class="box" :style="{ backgroundColor: `rgb(${r}, ${g}, ${b})` }"> -->
    <div class="box" :style="{ backgroundColor: rgb }"></div>
        
      <!-- 传统方法：{{ `rgb(${r}, ${g}, ${b})` }} -->
      <!-- 特性：调用计算书属性时，后面不用跟括号 -->
      {{ rgb }}

    </div>
    <button @click="show">按钮</button>
  </div>

  <script>
    var vm = new Vue({
      el: '#app',
      data: {
        // 红色
        r: 0,
        // 绿色
        g: 0,
        // 蓝色
        b: 0
      },
      methods: {
        show() {
        // 传统方法：console.log(`rgb(${this.r}, ${this.g}, ${this.b})`)
        console.log(this.rgb)
        }
      },
      computed: {
        rgb() {
          return `rgb(${this.r}, ${this.g}, ${this.b})`
        }
      }
    });
  </script>
</body>

</html>

<!-- 例子：

  <input type="text" v-model.number="count" />
  <p>{{ count }} 乘以 2 的值为：{{ plus }}</p>

  data() {
    return { count: 1 }
  },

  computed: {
    plus() {
      return this.count * 2
    }
  }

-->

<!-- 例子：筛选数组。筛选出小于 0 或等于 0 的id

  <div v-for="item in filterList" :key="item.id"></div>

  data() {
    return { 
      list: [
        {
          id: 0,
          text: '苹果'
        },
        {
          id: 1,
          text: '香蕉'
        },
        {
          id: 2,
          text: '樱桃'
        },
      ] 
    }
  }

  computed: {
    // 筛选数组。筛选出小于 0 或等于 0 的id
    filterList() {
      return this.list.filter(v => v.id <= 0)
    }
  }

-->

<!-- 计算属性 & 方法 的区别

  特性：
    计算属性会缓存计算的结果，只有计算属性依赖的数据发生变化时，才会重新进行运算。因此计算属性的性能更好

      计算属性只执行了 1 次
        <p>{{ count }} 乘以 2 的值为：{{ plus }}</p>
        <p>{{ count }} 乘以 2 的值为：{{ plus }}</p>
        <p>{{ count }} 乘以 2 的值为：{{ plus }}</p>

      方法执行了 3 次
        <p>{{ count }} 乘以 2 的值为：{{ plus1() }}</p>
        <p>{{ count }} 乘以 2 的值为：{{ plus1() }}</p>
        <p>{{ count }} 乘以 2 的值为：{{ plus1() }}</p>

        computed: {
          plus() {
            console.log('计算属性被执行了')
            return this.count * 2
          }
        }

        methods: {
          plus1() {
            console.log('方法被执行了')
            return this.count * 2
          }
        }

-->

<!-- 计算属性 & 侦听器 的区别

  计算属性：适合监听 多个 数据的变化，通过计算返回一个新值
  侦听器：适合监听 单个 数据的变化，通过执行特定的业务处理，不需要有任何返回值

-->