---
title: 动态组件
date: 2022-06-27 11:01:39
permalink: /pages/47f08e/
categories:
  - 《前端》笔记《框架》
  - 1.vue2
tags:
  - 
---
**语法：** `<component :is="渲染指定组件"> 组件`

**作用：** 动态切换 组件 的 显示 和 隐藏

**特性：** 可以把 <component> 组件 理解为组件的占位符

**应用场景：** tab 栏切换

**存在的问题：** 点击按钮让 Left 组件中的 值 自增，然后在切换其它组件，在切换回来，Left 组件的 值又恢成自增前的值了，应该是自增后的值才对

**解：** 切换组件时，之前的组件已经被销毁了，再切换回原来的组件时，已经不是用来的组件了，是一个新的组件

**解决方法：** `keep-alive`
**作用：** 防止组件在切换其它组件时销毁
**使用方法：** 将组件用 keep-alive 包起来

**keep-alive 对应的生命周期函数：**
    组件 缓存（隐藏） 时触发：deactivated   提示：组件创建完毕后，会自动执行一次
    组件 激活（显示） 时触发：activated

**keep-alive 中的 include / exclude 属性：**
**注意：** 这两个属性只能同时存在一个

（1）include 属性
    作用：匹配的组件 会 被缓存
    特性：默认情况下 keep-alive 会将包裹的组件全部进行缓存，加上 include 属性后 keep-alive 只会缓存 include 匹配的组件，没有匹配的组件切换时，会被销毁

（2）exclude 属性
    作用：匹配的组件 不会 被缓存

```
<template>
    <div class="app-container">

        <button @click="comName = 'Left'>展示 Left </button>
        <button @click="comName = 'Right'>展示 Right </button>

        <keep-alive include="Left, Right">
            <component :is="comName"></component>
        </keep-alive>
        
    </div>
</template>

<script>
    data() {
        return {
            comName: 'Left'
        }
    },
    activated() {
        console.log('组件被激活了')
    },
    deactivated() {
        console.log('组件被缓存了')
    }
</script>
```