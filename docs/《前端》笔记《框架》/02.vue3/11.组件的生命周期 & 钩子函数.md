---
title: 组件的生命周期 & 钩子函数
date: 2022-06-27 11:01:39
permalink: /pages/8c2d46/
categories:
  - 《前端》笔记《框架》
  - vue3
tags:
  - 
---
提示：在组合式 API 中，只能使用组合式 API 里的钩子函数

特性：
  1、除了 setup，其它钩子都要放在 setup 中执行
  2、允许定义多个相同的钩子函数，来实现不同的逻辑

一、创建 阶段

（1）setup：创建实例前
  作用：
    1、组合式API的 起点
    2、提供模板中的数据和方法

  特性：
    1、模板中用到的数据和方法需要返回出去
    2、在 beforeCreate 钩子前执行，也就是组件实例创建前执行（无法使用 this，因为值为 undefined）
    3、在使用钩子函数时，vue 会自动按需导入对应的钩子函数

（2）onBeforeMount：HTML结构 渲染前 触发
（3）onMounted：HTML结构 渲染后 触发

二、运行 阶段：data 中的数据变化后 触发
（1）onBeforeUpdate：页面重新渲染 前
（2）onUpdated：页面重新渲染 后

三、销毁 阶段
（1）onBeforeUnmount：组件 销毁前 触发
（2）onUnmounted：组件 销毁后 触发

例子：
  <template>
    <div class="container">
      container
    </div>
  </template>
  <script>
    import { onBeforeMount, onMounted } from 'vue'
    export default {
      setup () {
        onBeforeMount(()=>{
          console.log('DOM渲染前',document.querySelector('.container'))
        })
        onMounted(()=>{
          console.log('DOM渲染后1',document.querySelector('.container'))
        })
        onMounted(()=>{
          console.log('DOM渲染后2',document.querySelector('.container'))
        })
      },
    }
  </script>