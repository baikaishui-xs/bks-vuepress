---
title: computed 函数
date: 2022-06-27 11:01:39
permalink: /pages/fd5957/
categories:
  - 《前端》笔记《框架》
  - vue3
tags:
  - 
---
作用：定义计算属性

计算属性：当需要依赖现有的响应式数据，根据一定逻辑得到一个新的数据

特性：
  1、计算属性的值 无法修改
  2、计算属性的值 为响应式

功能：通过今年的年龄，求出后年的年龄

  <template>
    <div class="container">
      <div>今年：{{age}}岁</div>
      <div>后年：{{newAge}}岁</div>
    </div>
  </template>
  <script>
  import { computed, ref } from 'vue'
  export default {
    name: 'App',
    setup () {
      const age = ref(16)
      const newAge = computed(()=>{
        // 返回值就是计算属性的值
        return age.value + 2
      })
      return {age, newAge}
    }
  }
  </script>

高级用法：

  作用：让计算属性支持 v-model（允许修改计算属性的值）（允许支持双向数据绑定）

  特性：该用法也支持 vue2.x

  <template>
    <div class="container">
      <div>今年：{{age}}岁</div>
      <div>后年：{{newAge}}岁</div>
      <!-- 使用v-model绑定计算属性 -->
      <input type="text" v-model="newAge">
    </div>
  </template>
  <script>
    import { computed, ref } from 'vue'
    export default {
      name: 'App',
      setup () {
        const age = ref(16)
        // （1）传入对象
        const newAge = computed({
          // （2）get函数，获取计算属性的值
          get(){
            return age.value + 2
          },
          // （3）set函数，给计算属性设置值时触发
          set (value) {  // value：计算属性的值
            age.value = value - 2
          }
        })
        return {age, newAge}
      }
    }
  </script>