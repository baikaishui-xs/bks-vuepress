---
title: 组件
date: 2022-06-27 11:32:08
permalink: /pages/3e78f3/
categories:
  - 《前端》笔记《库》
  - Element-ui
tags:
  - 
---
# 知识点：Element-ui 组件

**文档（icon 图标）：** https://element.eleme.cn/#/zh-CN/component/icon#icon-tu-biao

# Form 表单
  ## el-form 属性
  **:model：** 表单数据
  **label-width：** label 的宽度

  ## el-form-item 属性
  **label：** 表单项左边的文本

  ## （一）基础结构
  **文档：** https://element.eleme.cn/#/zh-CN/component/form#dian-xing-biao-dan

  ```html
  <!-- XXX 表单 -->
  <el-form :model="XXXFormData">
    <el-form-item label="活动名称" label-width="100px">
      <el-input v-model="XXXFormData.username"></el-input>
    </el-form-item>
    <el-form-item label="活动名称" label-width="100px">
      <el-input v-model="XXXFormData.password"></el-input>
    </el-form-item>
  </el-form>
  ```
  
  ```js
  data() {
    return {
      XXXFormData: { // XXX 表单数据
        username: '',
        password: '',
      },
    }
  }
  ```

  ## （二）为输入框添加 icon 图标
  **文档（带 icon 的输入框）：** https://element.eleme.cn/#/zh-CN/component/input#dai-icon-de-shu-ru-kuang
  **文档（icon 图标）：** https://element.eleme.cn/#/zh-CN/component/icon#icon-tu-biao

  **使用步骤：** 添加 prefix-icon / suffix-icon 属性
  prefix-icon：在前面添加图标
  suffix-icon：在后面添加图标
  ```js
  <el-input prefix-icon="el-icon-search"></el-input>
  ```

  **使用第三方图标（阿里矢量图）：**
  ```js
  <el-input prefix-icon="iconfont icon-search"></el-input>
  ```

  ## （三）表单验证
  **文档：** https://element.eleme.cn/#/zh-CN/component/form#biao-dan-yan-zheng

  ### （1）定义验证规则（-- 定义 data）
  **require：** 是否为必填项
  **trigger：** 验证方式（change：表单值发生变化时校验）（blue：表单失去焦点时进行校验）
  **message：** 校验不通过，提示消息
  **validator：** 自定义验证规则（建议在内置配置无法满足的情况下，在使用自定义验证规则）
  **pattern：** 正则表达式（true：验证通过）（false：验证不通过）

  ```js （-- data 配置项）
  XXXFormRules: { // 表单验证规则
    username: [
      { required: true, trigger: 'blur', message: '不能为空'}, // 不能为空
      { min: 3, max: 10, message: '长度在 3 到 10 个字符之间', trigger: 'blur' }, // 长度最少 3 位，最多不能超过 10 位
      { pattern: /^1[3-9]\d{9}$/, message: '手机号格式不正确', trigger: 'blur' } // 手机号格式
      // { trigger: 'blur', validator: validateImgCode }  // 第三条验证规则
    ]
  }
  ```

  ### （2）为表单绑定验证规则对象（:rules）
  ```js
  <el-form :rules="XXXFormRules">
  ```
  
  ### （3）为表单项添加验证规则（prop 属性）
  ```js
  <el-form-item prop="username">
  ```

  ### 【BUG】el-select 不能为空的验证规则，即使有值也显示为空的问题
  1、trigger 设置为 change
  2、type 设置为 number（value 的值是什么类型的这里就填什么类型）

  ```js
  districtId: [
    { required: true, trigger: 'change', message: '不能为空', type: 'string' } // 不能为空
  ],
  ```

  ### 【可选】validator 配置项的使用步骤：
  （1）定义验证规则（-- @/utils/validate.js）
  ```js
  // 手机号
  export function validMobile(str) {
    return /^1[3-9]\d{9}$/.test(str)
  }
  ```

  （2）导入验证规则（-- 组件）
  ```js
  import { validMobile } from '@/utils/validate'
  ```

  （3）定义验证规则
  ```js
  // 二维码验证规则
  const validateUsername = (rule, value, callback) => {
      if (!validUsername(value)) {
        // 校验失败
        callback(new Error('手机号格式不正确'))
      } else {
        // 校验成功
        callback()
      }
    }
  ```

  （4）配置验证规则
  ```js
  loginFormRules: {
    username: [
      ...
      
      -- 增
      { trigger: 'blur', validator: validateImgCode }  // 第三条验证规则
      --

    ]
  }
  ```

  ### 其它
  隐藏验证失败时，浏览器控制台输出 async-validator 验证警告
    （1）打开 node_modules\async-validator\es\util.js 文件
    （2）将 console.warn(type, errors) 注释掉

  bug：
    （1）表单验证明明有值，却一直提示不能为空
      解决方法：prop 的值和 表单数据对象对应的属性名 必须相同

  ## （四）表单预验证
  （1）获取表单实例对象
  **语法：** ref="标识符Ref"
  ```js
  <el-form ref="XXXFormRef"></el-form>
  ```

  （2）调用表单实例对象上的 validate 预验证方法
  ```js
  sure() {
    this.$refs.XXXFormRef.validate(async isOK => {
      if (isOK) { // isOK：验证结果（true：通过）（false：不通过）
      }
    })
  }
  ```

  ## （五）表单重置
  **说明：** 显示时是什么样子的，重置后就是什么样子的

  ### （1）获取表单实例对象
  ```js
  <el-form ref="XXXFormRef"></el-form>
  ```

  ### （2）调用 resetFields() 重置表单
  **提示：** 如果是对话框，推荐放在取消方法中，这样可以少调用一次方法

  ```js
  setTimeout(() => { // 解决对话框连续点击确定按钮，导致提交空数据的问题
    this.$refs.addAuthorityFormRef.resetFields()
  }, 1000)
  ```

  ### 【BUG】点击编辑子部门，数据回写后在点击新增部门，这时候数据重置的是回写时的数据
  **解决方法：** 将回写的数据放到 $nextTick 中
  ```js
  showDialog(type, data) { // 显示对话框
      if (type === 'add') {
        this.dialogConfig.title = '添加子部门'
        this.formData.pid = data.id
      }
      if (type === 'edit') {
        this.dialogConfig.title = '编辑子部门'

        -- 改（旧）
        this.formData = data
        --

        -- 改（新）
        this.$nextTick(() => {
          this.formData = data
        })
        --
      }
      if (type === 'del') {
        this.dialogConfig.title = '删除子部门'
      }
      this.dialogConfig.isShowDialog = true
    }
  ```

  ### 【BUG】报错 vue.runtime.esm.js?2b0e:619 [Vue warn]: Error in v-on handler: "TypeError: this.$refs.formRef.resetFields is not a function"
  **说明：** `this.$refs.formRef 可能已经存在，请重新命名`

  ```js
  -- 改（旧）
  this.$refs.formRef
  --

  -- 改（新）
  this.$refs.formRef1
  --
  ```

  ### 【BUG】点击重置没有效果
  **解决方法：** <el-form-item> 组件必须要有 prop 属性，也就是要有表单验证的功能
  `<el-form-item prop="password">`  

# Button 按钮
  **文档：** https://element.eleme.cn/#/zh-CN/component/button

  ## 属性
  **type：** （primary：原色）（success）（warning）（danger）（info）（text）
  **icon：** 图标
  **disabled：** 是否禁用

# Container 布局容器
  **文档：** https://element.eleme.cn/#/zh-CN/component/container#container-bu-ju-rong-qi

  （1）按需导入组件（-- plugins/element.js）
  ```js
  import { Container, Header, Aside, Main } from 'element-ui'
  ```

  （2）全局注册（-- plugins/element.js）
  ```js
  Vue.use(Container)
  Vue.use(Header)
  Vue.use(Aside)
  Vue.use(Main)
  ```

  （3）选择合适的常见页面布局，并将结构复制到代码中（-- 组件.vue）：https://element.eleme.cn/#/zh-CN/component/container#chang-jian-ye-mian-bu-ju
  ```html
  <el-container>
    <!-- 头部 容器 -->
    <el-header>Header</el-header>
    <!-- 外层 容器 -->
    <el-container>
      <!-- 侧边栏 容器 -->
      <el-aside width="200px">Aside</el-aside>
      <!-- 主体 容器 -->
      <el-main>Main</el-main>
    </el-container>
  </el-container>
  ```

# NavMenu 导航菜单
  **文档：** https://element.eleme.cn/#/zh-CN/component/menu#ce-lan

  ## 侧栏
  ### （一）基础结构
  （1）按需导入（-- plugins/element.js）
  ```js
  import { Menu, Submenu, MenuItem } from 'element-ui'
  ```

  （2）全局注册组件（-- plugins/element.js）
  ```js
  Vue.use(Menu)
  Vue.use(Submenu)
  Vue.use(MenuItem)
  ```

  （3）导入结构（-- 组件）
  **属性描述：**
  **`<el-menu>：`**
  ```css
  background-color="#333744"：背景颜色
  text-color="#fff"：文本颜色
  active-text-color：当前项文本颜色
  ```
  ```html
  <!-- 侧边栏菜单 区 -->
  <el-menu background-color="#333744" text-color="#fff">
    <!-- 一级菜单 -->
    <el-submenu index="1">
      <!-- 模板区域 -->
      <template slot="title">
        <!-- 图标 -->
        <i class="el-icon-menu"></i>
        <!-- 文本 -->
        <span>一级菜单</span>
      </template>
      <!-- 二级菜单 -->
      <el-menu-item>
        <i class="el-icon-menu"></i>
        <span slot="title">二级菜单</span>
      </el-menu-item>
    </el-submenu>
  </el-menu>
  ```

  ### （二） 为每个一级菜单指定不同的图标
  （1）定义一个对象，用于存放图标名，属性名为一级菜单项 id
  ```js
  // 一级菜单图标
  iconsObj: {
    '0': 'el-icon-user-solid',
    '1': 'el-icon-key',
    '2': 'el-icon-s-cooperation',
    '3': 'el-icon-s-claim',
    '4': 'el-icon-s-help',
  },
  ```

  （2）动态添加类名
  ```html
  <i :class="iconsObj[item.id]"></i>
  ```
  
  ### （三）点击菜单时显示不同的路由
  传统方法：为每个菜单添加 router-link
  推荐方法：开启 vue-router 路由模式
  说明：启用该模式会在激活导航时以 index（菜单id） 作为 path 进行路由跳转（如：localhost:8080/#/110）
  提示：使用 菜单id 作为 path 进行路由跳转并不合适，推荐使用 path
  例：
    （1）为 <el-menu> 添加 router 属性
      <el-menu router></el-menu>

    （2）将 <el-menu-item> 中的 index 改为 path
      <el-menu-item :index="'/' + subItem.path" v-for="subItem in item.children">

  ### （四）点击菜单时，让菜单高亮显示
  原理：default-active="index">
  语法：为 <el-menu> 添加 default-active="index"> 属性
  使用步骤：
    （1）绑定点击事件
      <el-menu-item @click="saveNavState('/' + children.path)">

    （2）将当前菜单项的 index 存储起来
      // 存储当前菜单项的 index
      saveNavState(activePath) {
        window.sessionStorage.setItem('activePath', activePath)
        this.activePath = activePath
      }
    
    （3）定义数据
      // 当前菜单项的 index
      activePath: ''

    （4）动态绑定 default-active 属性
      <el-menu :default-active="activePath">

    （5）为 activePath 赋值
      created() {
        this.activePath = window.sessionStorage.getItem('activePath')
      }

# 面包屑导航
  **文档：** https://element.eleme.cn/#/zh-CN/component/breadcrumb#breadcrumb-mian-bao-xie

  ## （一）基础结构

  ## （二）图片分隔符
  （1）按需导入
  ```js
  import { Breadcrumb, BreadcrumbItem } from 'element-ui'
  ```

  （2）注册
  ```js
  Vue.use(Breadcrumb)
  Vue.use(BreadcrumbItem)
  ```

  （3）导入结构
  ```html
  <!-- 面包屑导航（图标分隔符） -->
  <el-breadcrumb separator-class="el-icon-arrow-right" style="margin-bottom: 20px">
    <el-breadcrumb-item :to="{ path: '/' }">首页</el-breadcrumb-item>
    <el-breadcrumb-item>活动管理</el-breadcrumb-item>
    <el-breadcrumb-item>活动列表</el-breadcrumb-item>
    <el-breadcrumb-item>活动详情</el-breadcrumb-item>
  </el-breadcrumb>
  ```

# 卡片视图（简单卡片）
  **文档：** https://element.eleme.cn/#/zh-CN/component/card#jian-dan-qia-pian

  （1）导入结构
  ```html
  <!-- 卡片视图（简单卡片） -->
  <el-card></el-card>
  ```

# Input 输入框
  **文档：** https://element.eleme.cn/#/zh-CN/component/input#fu-he-xing-shu-ru-kuang

  ## 属性
  | 属性     | 说明                                  | 默认值 |
  | -------- | ------------------------------------- | ------ |
  | rows     | 输入框行数。仅对 type='textarea' 生效 | 2      |
  | disabled | 禁用状态                              |        |

  ## （一）基础结构

  ## （二）复合型输入框
  （1）导入结构
  ```html
  <!-- Input 输入框（复合输入框） -->
  <el-input placeholder="请输入内容">
    <el-button slot="append" icon="el-icon-search"></el-button>
  </el-input>
  ```

# Table 表格（基础表格）
  **文档：** https://element.eleme.cn/#/zh-CN/component/table#ji-chu-biao-ge

  ## <el-table> 属性
  | 参数               |         说明         |   类型 | 默认值 |
  | data              | 渲染的列表数据         |    -  | -          |
  | border            | 显示边框线 |         |    -  | -          |
  | stripe            | 隔行变色 |         |    -  | -          |
  | node-key          | 用于区分层级。值为节点数据中的一个字段名，这个字段名必须是唯一的 | String | - |


  ## <el-table-column> 属性
  **prop：** 该字段的数据
  **type：** （index：序号）
  **align：** 对齐方式
  **width：** 宽度
  **sortable：** 排序
  **formatter：** 格式化字段数据【值：（函数）】

  ## （一）基础结构
  ```html
  <!-- xxx 表格 -->
  <el-table :data="xxxTableList" border stripe>
    <el-table-column label="序号" type="index" align="left" width="80px"></el-table-column>
    <el-table-column label="邮箱" prop="email" align="center"></el-table-column>
    <el-table-column label="电话" prop="mobile" align="center"></el-table-column>
  </el-table>
  ```

  ```js
  data() {
    return {
      xxxTableList: [ // xxx 表格数据
        {
          email: '123@qq.com',
          mobile: '123456789'
        },
        {
          email: '312@qq.com',
          mobile: '987654321'
        }
      ]
    }
  }
  ```

  ## （二）树形表格
  **说明：** data 数据必须是树形结构的

  ### （1）添加 row-kwy 属性
  **node-key：** 用于区分层级。值为节点数据中的一个字段名，这个字段名必须是唯一的

  ```js
  <el-table row-key="id">
  ```

  ### 只显示前两层，后面的层级不显示，且第二层不显示添加按钮
  感觉用不上，就没做，如果有需求可以看视频【3-11 权限设计和管理/3.2获取权限数据并转化树形_.mp4；12 分钟】


  ## 获取当前数据项的对象
  **原理：** 通过 template 中的 `slot-scope/v-slot`（作用域插槽）中的 row 属性来获取列表数据中的 当前数据项
    - **row：** 当前数据项的字段信息

  ```html
  <el-table :data="userList" border stripe>
    <el-table-column label="操作" prop="mobile" align="center">
      <template slot-scope="{ row }">
        <el-button type="danger" @click="delete(row.id)">删除</el-button>
      </template>
    </el-table-column>
  </el-table>
  ```

  ```js
  methods() {
    async deleteRole(id) {
      // 这里没有使用 .catch，而是使用了 async/await，为了监听失败时的回调函数，可以使用 try/catch 来替代 .catch
      try {
        await this.$confirm('确认删除该角色吗？')
        // 只有执行成功才会执行以下代码（作用：替代 .then）
        await deleteRole(id)
        this.getRoleList()
        this.$message.success('删除角色成功')
      } catch(error) {
        // 只有执行失败才会进入到该作用域（作用：替代 .catch）
        console.log(error)
      }
    }
  }
  ```

  ## 通过枚举数据格式化字段数据
  **使用场景：** 该字段响应的数据为 1，需要把这个 1 变为特定的格式，如字段值为 1，则格式化为 正式

  （1）定义枚举数据（枚举数据：字段的值根据枚举数据进行变化）（-- @/api/新建 constant/employees.js）
  **枚举数据：**
  ```js
  export default {
    // 聘用形式
    hireType: [
      {
        id: 1,
        value: '正式'
      },
      {
        id: 2,
        value: '非正式'
      }
    ],
    // 在职状态
    workingState: [
      {
        id: '1',
        value: '在职'
      },
      {
        id: '2',
        value: '离职'
      }
    ],
  }
  ```

  （2）导入枚举数据（-- 组件）
  ```js
  import EmployeeEnum from '@/api/constant/employees'
  ```

  （3）绑定 formatter 属性（-- 同上）
  - **formatter：** 格式化内容【值：（函数）】

  ```html
  <el-table-column label="聘用形式" :formatter="formatEmployment" />
  ```

  （4）定义格式化方法（-- 同上; methods 配置项）
  ```js
  // 格式化 聘用字段的数据
  formatEmployment(row, column, cellValue, index) {
    // cellValue：当前字段的数据
    
    const obj = EmployeeEnum.hireType.find(item => item.id === cellValue)
    return obj ? obj.value : '未知'
  }
  ```

  ## 格式字段为时间的数据
  **使用场景：** 将 `2018-11-02T08:00:00.000+0000` 格式化为 `2018-11-02`

  **原理：** 作用域插槽 + 过滤器

  （1）将定义好的过滤器方法放到项目中（-- @/新建 filters/index.js）

  （2）导入过滤器（-- @/main.js）
  ```js
  import * as filters from '@/filters'
  ```

  （3）全局注册过滤器（-- 同上）
  ```js
  Object.keys(filters).forEach(key => {
    Vue.filter(key, filters[key])
  })
  ```

  （4）使用过滤器（-- 组件）
  ```html
  <el-table-column label="入职时间">

    -- 增
    <template slot-scope="{ row }">{{ row.timeOfEntry | formatDate }}</template>
    --

  </el-table-column>
  ```

    

# Tree 树形控件
  **文档：** `https://element.eleme.cn/#/zh-CN/component/tree#tree-shu-xing-kong-jian`

  **原理：**
  1、通过 props 指定 children、label
  2、将响应的数组数据转换成树形结构，并渲染到组件中

  ## 属性
  | 参数               |         说明         |   类型 | 默认值 |
  | :----------------- | :------------------: | -----: |      |
  | default-expand-all | 是否默认展开所有节点 |        |          |
  | :props             | 指定 children、label | object |        |
  | show-checkbox      | 节点是否可被选择 | boolean | false |
  | node-key      | 用于区分层级。值为节点数据中的一个字段名，这个字段名必须是唯一的 | String | - |
  | default-checked-keys      | 默认勾选的节点 | array | - |
  | check-strictly | 选择父组件后，并不会选择所有的子组件 | boolean | false |

  ## 方法
  **@node-click：** 点击节点时触发（参数一：当前节点对象）
  **getCheckedKeys：** 获取选中的节点，选中节点的值为 node-key 设置的值

  ## （一）基础结构
  ```html
  <el-tree :data="xxxTreeData" :props="defaultProps" default-expand-all></el-tree>
  ```
  
  ```js
  data() {
    return {
      xxxTreeData: [ // 树形控件数据
        {
          label: '一级 1',
          children: [
            {
              label: '二级 1-1',
              children: [
                {
                  label: '三级 1-1-1'
                }
              ]
            }
          ]
        },
        {
          label: '一级 2',
          children: [
            {
              label: '二级 2-1',
              children: [
                {
                  label: '三级 2-1-1'
                }
              ]
            },
            {
              label: '二级 2-2',
              children: [
                {
                  label: '三级 2-2-1'
                }
              ]
            }
          ]
        },
        {
          label: '一级 3',
          children: [
            {
              label: '二级 3-1',
              children: [
                {
                  label: '三级 3-1-1'
                }
              ]
            },
            {
              label: '二级 3-2',
              children: [
                {
                  label: '三级 3-2-1'
                }
              ]
            }
          ]
        }
      ],
      defaultProps: { // 指定渲染的数据
        children: 'children', // 从 data 中指定渲染 children 数据
        label: 'label' // 从 data 指定渲染 label 数据
      }
    }
  },
  ```

  ## （二）自定义节点内容
  ```html
  <el-tree :data="xxxTreeData" :props="defaultProps" default-expand-all>

    -- 增（原理：插槽）（slot-scope：作用域插槽，接收传递给插槽的数据）（{ data }：每个节点的数据对象）
    <el-row slot-scope="{ data }" type="flex" class="box" style="width: 100%">
      <el-col class="title">{{ data.label }}</el-col>
      <el-col :span="2" class="operate">
        <el-dropdown>
          <span class="el-dropdown-link">
            操作<i class="el-icon-arrow-down el-icon--right" />
          </span>
          <el-dropdown-menu slot="dropdown">
            <el-dropdown-item>添加子部门</el-dropdown-item>
          </el-dropdown-menu>
        </el-dropdown>
      </el-col>
    </el-row>
    --

  </el-tree>
  ```
  
  ### 属性
  | 参数                     |       说明       | 类型 |
  | :----------------------- | :--------------: | ---: |
  | slot-scope（作用域插槽） | 当前 itme 的数据 |      |

  ## （三）默认展开和默认选中
  ### （1）添加 node-key 属性
  **原理：** 当一个值在 node-key 和 selectNode 中都存在时，这个值就会被选中

  ```html
  <el-tree node-key="id"></el-tree>
  ```

  ### （2）添加 default-checked-keys 属性
  ```html
  <el-tree :default-checked-keys="selectNode" :check-strictly="true"></el-tree>
  ```

  ### （3）获取选中的节点
  #### 1、获取 <el-tree> 的实例
  ```html
  <el-tree ref="xxxRef"></el-tree>
  ```

  #### 2、获取选中的节点
  ```js
  this.$refs.xxxRef.getCheckedKeys()
  ```

  ### 【BUG】取消已选的节点，关闭对话框在打开对话框时，取消的已选的节点并没有取消，只有第二次打开对话框才正常显示
  **解决方法：** 清空已选择的节点
  **提示：** 推荐在对话框取消事件中清空，这样就不需要再确定按钮中在写一次了

  ```js
  data() {
    return {
      selectNode: [] // 已选择的节点
    }
  },
  methods: {
    cancel() { // 取消
      this.selectNode = []
    }
  }
  ```

  ## 将响应的数组数据转换成树形结构
  **如：**
  ```js
  // 响应的数据
  [
    { id: 1, pid: '', text: '菜单1' },
    { id: 11, pid: 1, text: '菜单1-1' },
    { id: 12, pid: 1, text: '菜单1-2' },
    { id: 2, pid: '', text: '菜单2' },
    { id: 21, pid: 2, text: '菜单2-1' },
  ]
  ```
  ```js
  // 转换成树形结构的数据
  [
    {
      id: 1, pid: '', text: '菜单1', children: [
        { id: 11, pid: 1, text: '菜单1-1' },
        { id: 12, pid: 1, text: '菜单1-2' },
      ]
    },
    {
      id: 2, pid: '', text: '菜单2', children: [
        { id: 21, pid: 2, text: '菜单2-1' },
      ]
    }
  ]
  ```

  **原理：** 递归算法
  
  （1） 定义方法（-- utils/新建 dataConvert.js）
  ```js
  export function tranListToTreeData(list, rootValue) { // 将数组数据转换成树形结构
    var arr = []
    list.forEach(item => {
      if (item.pid === rootValue) {
        const children = tranListToTreeData(list, item.id)
        if (children.length) {
          item.children = children
        }
        arr.push(item)
      }
    })
    return arr
  }
  ```

  （2）导入方法
  ```js
  import { tranListToTreeData } from '@/utils/dataConvert'
  ```

  （2）调用方法
  ```js
  this.departs = tranListToTreeData(result.depts, '') // 将数组数据转换成树形结构
  ```

# Dropdown 下拉菜单
  **文档：** `https://element.eleme.cn/#/zh-CN/component/dropdown#dropdown-xia-la-cai-dan`

  ## el-dropdown 属性
  trigger：（click：点击时才显示下拉菜单）

  ## el-dropdown 事件
  @command：点击菜单项后触发

  ## el-dropdown-item 属性
  command: 向 command 事件传递参数

  ## （一）基础用法
  ```html
  <el-dropdown>
    <span class="el-dropdown-link">
      下拉菜单<i class="el-icon-arrow-down el-icon--right"></i>
    </span>
    <el-dropdown-menu slot="dropdown">
      <el-dropdown-item>黄金糕</el-dropdown-item>
      <el-dropdown-item>狮子头</el-dropdown-item>
      <el-dropdown-item>螺蛳粉</el-dropdown-item>
      <el-dropdown-item disabled>双皮奶</el-dropdown-item>
      <el-dropdown-item divided>蚵仔煎</el-dropdown-item>
    </el-dropdown-menu>
  </el-dropdown>
  ```

  ## （二）指令事件
  （1）监听 @command 事件（@command：点击菜单项后触发）
  ```html
  <el-dropdown @command="operateDepts">
  ```

  （2）绑定 command 属性（作用：向 operateDepts 传递参数）
  ```html
  <el-dropdown-item command="add">添加子部门</el-dropdown-item>
  <el-dropdown-item command="edit">编辑部门</el-dropdown-item>
  <el-dropdown-item command="del">删除部门</el-dropdown-item>
  ```

  （3）定义 @command 事件的方法
  ```js
  operateDepts(type) {
    if (type === 'add') {
      
    } else if (type === 'edit') {

    } else if (type === 'del') {
      // （确定 进入 .then）（取消 进入 .catch）
      this.$confirm('您确定要删除该组织部门吗？').then(() => {
        // 这里不推荐使用 async/await，因为这是写在 .then 里面的，推荐按照 .then 的顺序进行书写
        // 这里不推荐在后面加 .then，会变成嵌套形语法，可读性差
        // 因为这段代码是 Promise 对象，所以推荐使用 return
        return delDepartments(this.treeNode.id)
      }).then(() => {
        // 调用父组件的方法，重新获取数据
        this.$emit('delDepts')

        this.$message.success('删除部门成功')
      })
    }
  }
  ```

# Dialog 对话框
  **文档：** https://element.eleme.cn/#/zh-CN/component/dialog#dialog-dui-hua-kuang

  ## 属性
  **visible：** 显示隐藏对话框
  **width：** 对话框宽度（推荐百分比）

  ## el-dialog 事件
  @close：关闭对话框时触发

  ## （一）基础用法
  ```html
  <!-- 对话框 -->
  <el-dialog :title="dialogConfig.title" :visible="dialogConfig.isShowDialog" width="30%" @close="cancel">
    <span>这是一段信息</span>
    <el-row slot="footer" class="dialog-footer">
      <el-button @click="cancel">取 消</el-button>
      <el-button type="primary" @click="sure">确 定</el-button>
    </el-row>
  </el-dialog>
  ```

  ```js
  data() {
    return {
      dialogConfig: { // 对话框 配置项
        isShowDialog: false, // 是否显示对话框
        title: '' // 标题
      },
    }
  },
  methods: {
    showXXXDialog(type) { // 显示 XXX 对话框
      this.dialogConfig.title = type
      this.dialogConfig.isShowDialog = true
    },
    sure() { // 确定
      if (this.dialogConfig.title === '新增角色') console.log('处理代码')
      this.dialogConfig.isShowDialog = false
    },
    cancel() { // 取消
      this.dialogConfig.isShowDialog = false
    },
  }
  ```

  ## （二）数据回写
  **原理：** 父组件调用子组件的方法
  ```js
  -- 父组件
  // 显示对话框
  showDialog(type, row) {
    this.isShowDialog = true
    this.type = type
    if (row) {
      this.$refs.dialogRef.dataWriteback(row)
    }
  },
  ```

  ```js
  -- 子组件
  // 数据回写
  dataWriteback(dataItem) {
    // 深拷贝。解决修改 editFormData 中的属性时，dataItem 的属性也发送变化的问题
    Object.assign(this.editFormData, dataItem)
  },
  ```

# Select 选择器
  **文档：** `https://element.eleme.cn/#/zh-CN/component/select#select-xuan-ze-qi`

  ## 事件
  ### el-select
  **@focus：** 点击该组件时触发

  ## 基础用法
  ```html
  <el-select v-model="value" placeholder="请选择">
    <el-option v-for="item in options" :key="item.value" :label="item.label" :value="item.value"></el-option>
  </el-select>
  ```

  ## （一）通过枚举数据格式化数据
  （1）定义枚举数据（枚举数据：字段的值根据枚举数据进行变化）（-- @/api/新建 constant/employees.js）
  **模板：**
  ```js
  export default {
    // 聘用形式
    hireType: [
      {
        id: 1,
        value: '正式'
      },
      {
        id: 2,
        value: '非正式'
      }
    ],
    // 在职状态
    workingState: [
      {
        id: '1',
        value: '在职'
      },
      {
        id: '2',
        value: '离职'
      }
    ],
  }
  ```

  （2）导入枚举数据（-- 组件）
  ```js
  import EmployeeEnum from '@/api/constant/employees'
  ```

  （3）将枚举数据存到 data 中（-- 同上）
  ```js
  data() {
    return {
      EmployeeEnum
    }
  }
  ```

  （4）渲染枚举数据
  ```html
  <el-option v-for="item in EmployeeEnum.hireType" :key="item.id" :label="item.value" :value="item.id"></el-option>
  ```
 

# Tabs 标签页
  **文档：** `https://element.eleme.cn/#/zh-CN/component/tabs#tabs-biao-qian-ye`

  ## `<el-tabs>` 属性
  **：** 默认选中的 tab 项。
  | 参数    | 说明             | 类型   | 可选值 | 默认值 |
  | ------- | ---------------- | ------ | ------ | ------ |
  | v-model | 默认选中的选项卡 | string | -      | name   |

  ## （一）基础用法
  ```html
  <el-tabs v-model="activeName">
    <!-- 用户管理 tab -->
    <el-tab-pane label="用户管理" name="user">用户管理</el-tab-pane>
    <!-- 配置管理 tab -->
    <el-tab-pane label="配置管理" name="config">配置管理</el-tab-pane>
  </el-tabs>
  ```

  ```js
  data() {
    return {
      activeName: 'user', // 当前选项卡
    }
  }
  ```

# Alert 警告
  **文档：** `https://element.eleme.cn/#/zh-CN/component/alert#alert-jing-gao`

  ## 属性
  **type：**（info：消息）（warning：警告）（error：错误）
  **show-icon：** 是否显示内置图标

  ## （一）基本结构
  ```html
  <el-alert class="el-icon-video-camera-solid" title="对公司名称、公司地址、营业执照、公司地区的更新，将使得公司资料被重新审核，请谨慎修改" type="info"></el-alert>
  ```

# Pagination 分页
  **文档：** https://element.eleme.cn/#/zh-CN/component/pagination#pagination-fen-ye

  ## 属性
  **total：** 共多少条数据
  **:current-page：** 当前页数
  **:page-size：** 每页显示多少条数据
  **layout：** 控件布局

  ## 事件
  **@current-change：** 页码改变时触发（参数一：当前页）

  ## （一）基本结构
  ```html
  <!-- 分页组件 -->
  <el-pagination 
    :page-size="paginationObj.pagesize"
    :current-page="paginationObj.page"
    layout="prev, pager, next"
    :total="paginationObj.total"
    @current-change="changePage">
  </el-pagination>
  ```
  ```js
  data() {
    return {
      demoList: [], // Demo 列表
      paginationObj: { // 分页器对象
        page: 1, // 页码
        pagesize: 10, // 每页显示多少条数据
        total: 0, // 共多少条数据
      },
    }
  }
  methods: {
    async getDemoList() { // 获取 Demo 列表
      const res = await getDemoList({ page: this.paginationObj.page, pagesize: this.paginationObj.pagesize })
      this.roleList = res.rows
      this.paginationObj.total = res.total
    },
    changePage(newPage) { // 监听页码
      this.paginationObj.page = newPage
      this.getDemoList()
    },
  }
  ```

# Switch 开关
  **文档：** `https://element.eleme.cn/#/zh-CN/component/switch#switch-kai-guan`

  ## 属性
  | 参数               |         说明         |   类型 | 默认值 |
  | value               |         显示状态【值：（布尔值）】         |   - | - |
  | active-value            |        开启时的值         |   boolean / string / number | true |
  | inactive-value          |        关闭时的值         |   boolean / string / number | false |

  ## （一）基础用法
  ```html
  <el-switch value="1" active-value="1" inactive-value="0"></el-switch>
  ```

# DatePicker 日期选择器
  **文档：** `https://element.eleme.cn/#/zh-CN/component/date-picker#datepicker-ri-qi-xuan-ze-qi`

  ## （一）基础用法
  ```html
  <el-date-picker v-model="formData.timeOfEntry" placeholder="请选择入职时间" />
  ```

# Upload 上传
  **文档：** https://element.eleme.cn/#/zh-CN/component/upload#upload-shang-chuan

  ## el-upload 属性
  | 属性          | 说明                                                                         | 类型                                                           | 可选值                 |
  | ------------- | ---------------------------------------------------------------------------- | -------------------------------------------------------------- | ---------------------- |
  | list-type     | 样式                                                                         | string                                                         | （picture-card：虚线） |
  | :limit        | 文件最大上传数量                                                             | number                                                         | -                      |
  | action        | 上传地址                                                                     | string                                                         | -                      |
  | :on-preview   | 预览文件事件，点击预览后触发                                                 | function(【file：文件对象】)                                   | -                      |
  | :on-remove    | 删除文件事件，点击删除后触发                                                 | function(【file：文件对象】, 【fileList：删除之后的文件列表】) | -                      |
  | :on-change    | 添加文件事件，点击添加后触发。该事件添加成功、上传成功、添加失败，都会被调用 | function(【file：文件对象】, 【fileList：添加之后的文件列表】) | -                      |
  | before-upload | 上传文件之前触发，返回 true 允许上传，返回 false 则停止上传                  | function(【file：文件对象。包含文件大小、类型】)               | -                      |
  | :file-list    | 上传的文件列表                                                               | array                                                          | -                      |
  | :http-request | 覆盖默认的上传行为，实现自定义上传                                           | function                                                       | -                      |
  | disabled      | 是否禁用删除功能                                                          | -                                                              |  -                     |

  ## （一）用户头像上传
  ### 基础结构
  ```html
  <!-- 用户头像上传 -->
  <el-upload list-type="picture-card" :limit="1" action="#" :on-preview="preview" :on-change="changeFile" :on-remove="handleRemove" :file-list="fileList">
    <i class="el-icon-plus"></i>
  </el-upload>
  <el-dialog :visible.sync="isShowFileUploadDialog" title="图片预览">
    <img :src="uploadImgUrl" alt="" style="width: 100%">
  </el-dialog>
  ```

  （-- data 配置项）
  ```js
  fileList: [], // 上传图片列表
  isShowFileUploadDialog: false, // 是否显示文件上传 对话框
  uploadImgUrl: '', // 上传图片的 url 地址
  ```

  （-- methods 配置项）
  ```js
  preview(file) { // 预览 文件事件
    this.uploadImgUrl = file.url
    this.isShowFileUploadDialog = true
  },
  changeFile(file, fileList) { // 添加 文件事件
    提示：该事件会连续触发两次，添加成功一次，上传成功一次，所以不能使用 push
    this.fileList = fileList.map(item => item)
  },
  handleRemove(file, fileList) { // 删除 文件事件
    this.fileList = fileList
  }
  ```

  ### 获取用户头像
  #### （1）配置
  ```js
  data() {
    return {
      fileList: [{ url: '' }], // 上传图片列表
    }
  }
  methods() {
    async getStaffInfo(id) { // 获取 员工信息
      const result = await getStaffInfo(id)
      this.formData = result
      this.fileList[0].url = result.staffPhoto // 获取头像
    },
  }
  ```

  ### 根据上传数量，控制 <el-upload> 组件的显示隐藏
  #### （1）动态添加样式
  ```html
  <el-upload disabled :class="{ disabled: fileComputed }">
  ```
  
  #### （2）定义计算属性（-- computed 配置项）
  ```js
  fileComputed() {
    return this.fileList.length >= 1
  }
  ```

  #### （3）定义样式
  ```scss
  ::v-deep.disabled {
    .el-upload--picture-card {
      display: none
    }
  }
  ```

  ### 上传前检查。控制上传图片的类型和上传大小（该功能要配合 上传到腾讯云功能才能实现，否则会报 404）
  （1）绑定 before-upload 属性
  ```html
  <el-upload :before-upload="beforeUpload">
  ```
  （2）定义变量
  (-- data 配置项)
  ```js
  currentFileUid: null // 记录当前正在上传的 uid
  ```

  （3）定义事件（-- methods 配置项）
  ```js
  // 上传前检查。控制上传图片的类型和上传大小
  beforeUpload(file) {
    // 允许上传的文件类型
    const types = ['image/jpeg', 'image/gif', 'image/bmp', 'image/png']
    // 判断上传类型是否正确
    if (!types.some(item => item === file.type)) {
      this.$message.error('上传图片只能是 JPG、GIF、BMP、PNG 格式！')
      return false
    }

    const maxSize = 5 * 1024 * 1024
    // 文件大小不能超过 5M
    if (file.size > maxSize) {
      this.$message.error('上传的图片大小不能大于 5M')
      return false
    }

    this.currentFileUid = file.uid
    return true
  }
  ```

  ### 上传进度条
  （1）定义 Progress 进度条组件 的基础结构

  （2）定义上传进度条回调函数
  ```js
  // 上传进度事件
  onProgress: (progressData) => {

    -- 增
    // 将数据格式化为百分比
    this.percent = progressData.percent * 100
    --

  }
  ```

  （3）开启进度条
  ```js
  // 上传前检查。控制上传图片的类型和上传大小
  beforeUpload(file) {
    ...

    // 文件大小不能超过 5M
    if (file.size > maxSize) {
      this.$message.error('上传的图片大小不能大于 5M')
      return false
    }

    this.currentFileUid = file.uid

    -- 增
    this.isShowPercent = true
    --

    return true
  },
  ```

  （4）上传成功后关闭进度条，并重置进度条当前百分比
  ```js
  // 判断文件是否上传成功
  if (!err && data.statusCode === 200) {
    this.fileList[0] = {
      // 将上传成功后响应的图片地址赋值给原来的 url 属性
      url: 'http://' + data.Location,
    }

    -- 增
    // 解决图片上传速度太快，看不到进度条的问题
    setTimeout(() => {
      this.isShowPercent = false
      this.percent = 0
    }, 1000)
    --

  }
  ```
  
  ### 获取用户头像
  （1）绑定 ref（-- @/views/employees/detail.vue）
  ```html
  <ImageUpload ref="ImageUpload"></ImageUpload>
  ```

  （2）通过组件实例将用户头像放到 fileList 中
  ```js
  // 获取员工基本信息
  async getEmployeeInfo() {
    this.formData = await getEmployeeInfo(this.id)

    -- 增
    this.$refs.ImageUpload.fileList = [{ url: this.formData.staffPhoto }]
    --
    
  },
  ```

  ### 上传头像
  （1）为上传成功的文件添加 upload 属性来判断是否上传完成（-- @/components/ImageUpload/index.vue）
  ```js
  // 判断文件是否上传成功
  if (!err && data.statusCode === 200) {
    this.fileList[0] = {
      // 将上传成功后响应的图片地址赋值给原来的 url 属性
      url: 'http://' + data.Location,

      -- 增
      upload: true
      --

    }
    setTimeout(() => {
      this.isShowPercent = false
      this.percent = 0
    }, 1000)
  }
  ```

  （2）定义上传方法（-- @/views/employees/detail.vue; methods 配置项）
  ```js
  // 保存更新
  async saveUpdate() {
    // 判断文件是否上传完成
    if (fileList.some(item => !item.upload)) {
      this.$message.warning('图片还没上传完成')
      return
    }
    this.formData.staffPhoto = this.$refs.ImageUpload.fileList[0].url
    await keepEmployeeInfo(this.id, this.formData)
    this.$message.success('保存成功')
    this.getEmployeeInfo()
    }
  },
  ```


# Progress 进度条
  **文档：** `https://element.eleme.cn/#/zh-CN/component/progress#progress-jin-du-tiao`

  **提示：** 如果上传的文件太小，上传的速度会很快，可能都看不到进度条。可以使用的定时器，或大一点的文件进行测试

  ## 属性
  | 属性       | 说明                 | 类型   | 可选值 | 默认值 |
  | ---------- | -------------------- | ------ | ------ | ------ |
  | percentage | 进度条百分比（必填） | number | 0-100  | 0      |

  ## 基础结构
  ```html
  <el-progress v-if="isShowPercent" :percentage="percent" style="width: 180px"></el-progress>
  ```

  （-- data 配置项）
  ```js
  percent: 0, // 进度条当前百分比
  isShowPercent: false, // 是否显示进度条
  ```

# Checkbox 多选框
  **文档：** https://element.eleme.cn/#/zh-CN/component/checkbox#checkbox-duo-xuan-kuang

  ## （一）基础结构
  ```html
  <el-checkbox-group v-model="checkList">
    <el-checkbox label="复选框 A"></el-checkbox>
    <el-checkbox label="复选框 B"></el-checkbox>
    <el-checkbox label="复选框 C"></el-checkbox>
  </el-checkbox-group>
  ```

  ```js
  data() {
    return {
      checkList: ['选中且禁用','复选框 A'] // 选中项
    }
  }
  ```

  ## （二）显示值，和存储值不相同
  **说明：** 因为 label 的值即是显示值也是存储值

  **原理：** 将显示值写到 插槽 中

  ```html
  <el-checkbox-group v-model="checkList">
    <el-checkbox label="复选框 A">
      <!-- 显示值 -->
      {{'显示值'}}
    </el-checkbox>
  </el-checkbox-group>
  ```